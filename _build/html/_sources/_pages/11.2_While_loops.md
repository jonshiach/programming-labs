# While loops

For loops are useful for when we know how many times we want to repeat a set of commands. Sometimes we might not know this and would like to loop until a certain condition is met. This is where while loops come in. The MATLAB syntax for a while loop is

```matlab
while condition
    % commands
end
```

The lines that are betwee the while loop declaration and `end` will be executed while the `condition` returns a true result. For example, to print the numbers 0 to 4 as we did with a for loop add the following code into your program.

```python
% 11.2 While loops
fprintf("\n11.2 While loops\n----------------\n")
i = 1;

while i < 6
    fprintf("%d\n", i)
    i = i + 1;
end
```

With while loops we don't have a loop variable so we have defined the variable `i` and set it equal to 1. Then we have declared a while loop to loop whilst `i` is less than 6. Inside the while loop we use a `fprintf()` command to print the current value of `i` before incrementing it by 1. Run your program and you should see the following added to the console output.

```text
11.2 While loops
----------------
1
2
3
4
5
```

```{warning}
A common programming error when dealing with while loops is forgetting to update the while loop condition. This can result in the condition always being true and the commands in the while loop being executed forever. This is known as an **infinite loop**. 

To demonstrate this, delete or comment out the `i = i + 1` command in the while loop you have just written and rerun the program. You should set lots of 1s being printed to the console since the `i` variable is always 1 which is of course less than 5. To stop the program click on the stop icon $\blacksquare$. 
```

Let use a while loop to print out all of the Fibonacci numbers that are less than 1 million. To demonstrate this, enter the following code into your program.

```python
% Fibonacci number less than 1 million
F = [0, 1];

while F(end) + F(end - 1) < 1e6
    F = [F, F(end) + F(end - 1)];
end

fprintf("\nFibonacci numbers less than 1 million\n-------------------------------------\n")
F
```

This is quite similar to the code we used before. Note that `1e6` is equal to $1 \times 10^6$, so when the first Fibonacci number greater than a million is encountered the while loop terminates. Run your program and you should see the following added to the console.

```text
Fibonacci numbers less than 1 million
-------------------------------------

F =

  Columns 1 through 7

           0           1           1           2           3           5           8

  Columns 8 through 14

          13          21          34          55          89         144         233

  Columns 15 through 21

         377         610         987        1597        2584        4181        6765

  Columns 22 through 28

       10946       17711       28657       46368       75025      121393      196418

  Columns 29 through 31

      317811      514229      832040
```

---

## Exercises

```{exercise}
:label: matlab-loops-exercise-4

Use a while loop to print "hello again" ten times.
```

```{exercise}
:label: matlab-loops-exercise-5

The <a href="https://en.wikipedia.org/wiki/Collatz_conjecture" target="_blank">Collatz conjecture</a> states that the series generated by the following rules will eventually reach 1.

$$ x_{n+1} = \begin{cases} x_n/2 & \textsf{if $x_n$ is even}, \\ 3x_n + 1 & \textsf{if $x_n$ is odd}. \end{cases} $$

For example, for $x_0 = 10$ the sequence is

$$ \begin{align*}
    10 \to 5 \to 16 \to 8 \to 4 \to 2 \to 1
\end{align*} $$

and it took 6 steps to reach 1. Write a program that uses a while loop to print the numbers in the Collatz sequence for a given starting number. How many steps does it take for a starting number of 100 to reach 1?
```
